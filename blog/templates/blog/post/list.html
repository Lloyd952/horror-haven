{% extends "blog/base.html" %}

{% block title %}Horror Film Reviews - Horror Haven{% endblock %}

{% load humanize %} 

{% block content %}
    <h2>ðŸŽ¬ Latest Horror Reviews</h2>
    
    {% if tag %}
        <h3>Reviews tagged with "{{ tag.name }}"</h3>
    {% endif %}
    
    {% for post in posts %}
        <div class="review-card">
            <h2>
                <a href="{{ post.get_absolute_url }}">
                    {{ post.film_title }} ({{ post.year }})
                </a>
            </h2>
            
            <div class="film-details">
                <p><strong>Director:</strong> {{ post.director }}</p>
                <p><strong>Rating:</strong> <span class="rating">{{ post.get_rating_display }}</span></p>
                <p><strong>Reviewed by:</strong> {{ post.author }} on {{ post.created_on|naturalday }}</p>
            </div>
            
            <div class="tags">
                {% for tag in post.tags.all %}
                    <a href="{% url 'blog:post_list_by_tag' tag.slug %}" class="tag">{{ tag.name }}</a>
                {% endfor %}
            </div>
            
            <p>
                {{ post.body|truncatewords:50|linebreaks }}
            </p>
            
            <a href="{{ post.get_absolute_url }}" class="btn">Read Full Review</a>
        </div>
    {% empty %}
        <div class="review-card">
            <h3>No horror reviews yet!</h3>
            <p>Be the first to review a horror film and share your thoughts with the community.</p>
            {% if user.is_authenticated %}
                <p><a href="{% url 'admin:blog_review_add' %}" class="btn">Add Your First Review</a></p>
            {% else %}
                <p><a href="{% url 'login' %}" class="btn">Login to Add Reviews</a></p>
            {% endif %}
        </div>
    {% endfor %}
    
    {% include "pagination.html" with page=page_obj %}
{% endblock %}

